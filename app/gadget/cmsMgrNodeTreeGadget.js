define("",["./../breeze/framework/js/BreezeFW"],function(require){var e=require("./../breeze/framework/js/BreezeFW");return e.register({param:{displayName:{}},name:"cmsMgrNodeTreeGadget",onCreate:function(){},"private":{privateShowNodeTree:function(a,t,i){var r=this;r.MY.displayName=t||r.param.displayName[a]||"class_name";var n={alias:a,target:"parent",param:i};r.API.doServer("queryData","cms",n,function(a,t){if(a>0&&t&&t.listData&&t.listData.length){r.API.show("viewNodeTree");var i={},n={};if(t.listData&&t.listData.length)for(var d=0;d<t.listData.length;d++){var o=t.listData[d].id,s=t.listData[d].alias,l=t.listData[d].nodeid,c=t.listData[d][r.MY.displayName],m=t.model&&t.model.parent_alias;if(m&&m!=s&&(l=0),t.listData[d].ctalias)var p=t.listData[d].ctalias;var v={name:c,type:"item",id:o};if(p&&(v.ctalias=p),i[o]&&(v.type="folder",v.additionalParameters=i[o].additionalParameters),i[o]=v,null!=l&&0!=l){var h=i[l];h||(h={},i[l]=h),h.type="folder",h.additionalParameters||(h.additionalParameters={children:{}}),h.additionalParameters.children[v.id]=v}else n[o]=v}var f=function(e){this._data=e.data,this._delay=e.delay};f.prototype.data=function(e,a){var t=null;return"name"in e||"type"in e?("type"in e&&"folder"==e.type&&(t="additionalParameters"in e&&"children"in e.additionalParameters?e.additionalParameters.children:{}),null!=t&&setTimeout(function(){a({data:t})},parseInt(500*Math.random())+200),void 0):(t=this._data,a({data:t}),void 0)};var u=new f({data:n});r.API.find("#nodeTree").ace_tree({dataSource:u,multiSelect:!1,loadingHTML:'<div class="tree-loading"><i class="icon-refresh icon-spin blue"></i></div>',"open-icon":"icon-minus","close-icon":"icon-plus",selectable:!0,"selected-icon":"icon-ok","unselected-icon":"icon-remove~"});var y=e.use().getParameter("nodeid")||"";y&&(r.nodeid=y),r.API.find(".tree-item-name").each(function(){$(this).attr("id")==y&&($(this).prev().attr("class","icon-ok"),$(this).parent().addClass("tree-selected"))})}else $(".shownodecontent").removeClass("shownodecontent")})}},TrigerEvent:{trigerReShowNodeTree:function(e,a,t){this.API.private("privateShowNodeTree",e,a,t)}}}),e});