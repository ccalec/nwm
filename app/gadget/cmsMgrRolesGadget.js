define("",["./../breeze/framework/js/BreezeFW","./../breeze/framework/js/tools/Widget"],function(require){var e=require("./../breeze/framework/js/BreezeFW");return require("./../breeze/framework/js/tools/Widget")(e),e.register({name:"cmsMgrRolesGadget",onCreate:function(){var t=this;t.viewID="viewCmsRoles";var a={};if(t.MY.roleAlias=e.use().getParameter("role_alias")||"",t.MY.roleAlias){var i={alias:"role",filterFields:[{keyField:"role_alias"}],filterParam:{role_alias:t.MY.roleAlias}};t.API.doServer("queryData","cms",i,function(e,i){e>0&&i&&(a.role_name=i.listData[0].role_name,a.role_alias=i.listData[0].role_alias,t.API.doServer("queryData","cms",{alias:"action"},function(e,i){if(e>0&&i){if(!i.listData||!i.listData.length)return;for(var r={},c=[],n=["queryData","addData","modData","delData"],l=0;l<i.listData.length;l++){var s=i.listData[l],o=s.action_name,f=s.action_alias,d=f.split(".");if(2==d.length&&~$.inArray(d[1],n)){var h=o.substr(0,o.length-4);if(!h)continue;var u=$.inArray(d[1],n);r[h]=r[h]||[],r[h][u]={alias:f,name:o.substr(-4)}}else c.push(s)}a.cmsData=r,a.zdyData=c,a.checkedArr=[];var A={alias:"roleaction",filterFields:[{keyField:"role_alias"}],filterParam:{role_alias:t.MY.roleAlias}};t.API.doServer("queryData","cms",A,function(e,i){if(e>0){if(i&&i.listData&&i.listData.length)for(var r=0;r<i.listData.length;r++)a.checkedArr.push(i.listData[r].action_alias);t.API.show(t.viewID,a),t.API.find(".profile-info-row").hover(function(){$(this).css("background","#f7f7f7")},function(){$(this).css("background","none")}),t.API.find(".cmsSelAll").click(function(){var e=t.API.find("#cmsList input[type='checkbox']");e.attr("checked","true")}),t.API.find(".cmsCalAll").click(function(){var e=t.API.find("#cmsList input[type='checkbox']");e.each(function(){$(this).attr("checked")?$(this).removeAttr("checked"):$(this).attr("checked","true")})}),t.API.find(".zdySelAll").click(function(){var e=t.API.find("#zdyList input[type='checkbox']");e.attr("checked","true")}),t.API.find(".zdyCalAll").click(function(){var e=t.API.find("#zdyList input[type='checkbox']");e.each(function(){$(this).attr("checked")?$(this).removeAttr("checked"):$(this).attr("checked","true")})}),t.API.find(".rowSelAll").click(function(){var e=$(this).parents(".profile-info-row").find("input[type='checkbox']");e.attr("checked","true")}),t.API.find(".rowCalAll").click(function(){var e=$(this).parents(".profile-info-row").find("input[type='checkbox']");e.each(function(){$(this).attr("checked")?$(this).removeAttr("checked"):$(this).attr("checked","true")})})}})}}))})}},FireEvent:{},TrigerEvent:{eventSubmit:function(){var t=this,a=[];this.API.find("input[name='rolestatus']:checked").each(function(){a.push($(this).val())});var i={role_alias:t.MY.roleAlias,action_alias:a};this.API.doServer("modRoleAction","cms",i,function(t){t>0?e.use("Widget").alert("\u4fdd\u5b58\u6210\u529f","success"):e.use("Widget").alert("\u4fee\u6539\u5931\u8d25","danger")})},resetBtn:function(){location.reload()}}}),e});